var dragThrow=function(){var t=!1,n=0,r=0,i=0,s=0,o=0,u=0,a,f,l=!1,c=!1,h,p=100,d=5,v=0,m=3,g=0,y="scroll";this.targetObject=undefined;this.eventObject=undefined;this.originalGravity=0;this.moveY=!0;this.moveX=!0;this.originalDecay=.8;this.onlyTarget=!0;this.xOppositeEdge=!1;this.yOppositeEdge=!1;this.percentage=1;this.doZoom=!0;this.handleOverTarget=function(e){e.preventDefault();var t=this.findElement(e.target);l=!0;i=n=o=e.clientX||e.touches.item(0).clientX;s=r=u=e.clientY||e.touches.item(0).clientY;c=t===this.targetObject;this.checkSize();e.touches&&this.touchZoom(e.touches)};this.moveIt=function(e){e.preventDefault();console.log("hello");this.onlyTarget||(c=!0);if(l&&c){l=!0;t=!0;o=e.clientX||e.touches.item(0).clientX;u=e.clientY||e.touches.item(0).clientY;e.touches&&this.touchZoom(e.touches,!0);i=n;s=r;var h=u-r+this.targetObject.offsetTop,p=o-n+this.targetObject.offsetLeft;this.moveY&&(this.targetObject.style.top=h+"px");this.moveX&&(this.targetObject.style.left=p+"px");this.findEdgeY(0);this.findEdgeX(0);a=this.originalDecay;f=this.originalGravity;m=3;v=0}else{l=!1;this.onlyTarget||(c=!1)}n=o;r=u};this.checkSize=function(){this.xOppositeEdge=this.targetObject.offsetWidth>this.eventObject.offsetWidth;this.yOppositeEdge=this.targetObject.offsetHeight>this.eventObject.offsetHeight};this.touchZoom=function(t,n){console.log("hello");if(this.doZoom&&t.length>1){var r=Math.sqrt(Math.pow(u-t.item(1).clientY,2)+Math.pow(o-t.item(1).clientX,2)),i=(r-g)*(this.targetObject.offsetHeight/100),s=e.touches.item(0).clientX-this.eventObject.offsetLeft-this.targetObject.offsetLeft,a=e.touches.item(0).clientY-this.eventObject.offsetTop-this.targetObject.offsetTop;n&&this.zoom(s,a,i);this.checkSize();g=r}};this.mouseZoom=function(e){if(this.doZoom){e.preventDefault();e.stopPropagation();e=e?e:window.event;var t=Math.ceil((e.detail?e.detail*-1:e.wheelDelta/40)*20),n=e.clientX-this.eventObject.offsetLeft-this.targetObject.offsetLeft,r=e.clientY-this.eventObject.offsetTop-this.targetObject.offsetTop;this.zoom(n,r,t)}};this.zoom=function(e,t,n){n=Math.ceil(n*10)/10;var r=this.targetObject.offsetHeight,i=this.targetObject.offsetWidth;console.log("prev",this.targetObject.offsetHeight+n);if(y==="tooFarUp"&&n<0||y==="tooFarDown"&&n>0)y="scroll";HP=t/this.targetObject.offsetHeight;WP=e/this.targetObject.offsetWidth;if(this.targetObject.offsetHeight>this.targetObject.naturalHeight*2&&y==="scroll"){this.targetObject.style.height=this.targetObject.naturalHeight*2+"px";y="tooFarUp"}else if(this.targetObject.offsetHeight<this.targetObject.naturalHeight*.2&&y){this.targetObject.style.height=this.targetObject.naturalHeight*.2+"px";y="tooFarDown"}else y==="scroll"?this.targetObject.style.height=this.targetObject.offsetHeight+n+"px":n=0;this.targetObject.style.width=this.targetObject.offsetHeight*(this.targetObject.naturalWidth/this.targetObject.naturalHeight)+"px";r=this.targetObject.offsetHeight-r;i=this.targetObject.offsetWidth-i;this.targetObject.style.top=this.targetObject.offsetTop-r*HP+"px";this.targetObject.style.left=this.targetObject.offsetLeft-i*WP+"px";this.checkSize();this.percentage=1};this.throwIt=function(e){e.preventDefault();l=!1;t&&(h=setTimeout(this.theRepeater.bind(this),d))};this.findElement=function(e){while(e!==this.targetObject){if(e===this.eventObject||e===null)break;e=e.parentNode}return e};this.findEdgeY=function(e){if(this.yOppositeEdge){if(this.targetObject.offsetTop<this.eventObject.offsetHeight-this.targetObject.offsetHeight-20){e=-0.1*e;s=u;this.targetObject.style.top=this.eventObject.offsetHeight-this.targetObject.offsetHeight-20+"px"}if(this.targetObject.offsetTop>20){e=-0.1*e;s=u;this.targetObject.style.top="20px"}}else{if(this.targetObject.offsetTop<0){e=-1*e;this.targetObject.style.top="0px"}if(this.targetObject.offsetTop>this.eventObject.offsetHeight-this.targetObject.offsetHeight){e=-1*e;this.targetObject.style.top=this.eventObject.offsetHeight-this.targetObject.offsetHeight+1+"px"}}return e};this.findEdgeX=function(e){if(this.xOppositeEdge){if(this.targetObject.offsetLeft<this.eventObject.offsetWidth-this.targetObject.offsetWidth-20){e=-0.1*e;i=o;this.targetObject.style.left=this.eventObject.offsetWidth-this.targetObject.offsetWidth-20+"px"}if(this.targetObject.offsetLeft>20){e=-0.1*e;i=o;this.targetObject.style.left="20px"}}else{if(this.targetObject.offsetLeft<0){e=-1*e;this.targetObject.style.left="0px"}if(this.targetObject.offsetLeft>this.eventObject.offsetWidth-this.targetObject.offsetWidth){e=-1*e;this.targetObject.style.left=this.eventObject.offsetWidth-this.targetObject.offsetWidth+"px"}}return e};this.theRepeater=function(e){clearTimeout(this.t);var t=o,n=u,r=!1,c=o-i,p=u-s;if(!l){c*=a;p*=a;p<0?p+=f:p+=f*(1-f);p<0&&v>0&&(m=v);v=p;c=this.findEdgeX(c);p=this.findEdgeY(p);var g=c+this.targetObject.offsetLeft,y=p+this.targetObject.offsetTop;o+=c;u+=p;this.moveY&&(this.targetObject.style.top=y+"px");this.moveX&&(this.targetObject.style.left=g+"px");i=t;s=n;if(this.originalDecay<1){a-=.001;f=0;r=!0}else if(f&&m>2)a-=1e-5;else if(m<2){a-=.001;r=!0}h=setTimeout(this.theRepeater.bind(this),d);Math.abs(c)<.5&&Math.abs(p)<.5&&r&&clearTimeout(h)}}};dragThrow.prototype.init=function(e){this.targetObject=e.targetObject;this.eventObject=e.eventObject;if(this.targetObject.nodeName.toLowerCase()=="img"&&typeof this.targetObject.naturalHeight=="undefined"){var t=new Image;t.src=this.targetObject.src;this.targetObject.naturalHeight=t.height;this.targetObject.naturalWidth=t.width}this.originalDecay=typeof e.decay!="undefined"?e.decay:.8;this.originalGravity=typeof e.gravity!="undefined"?e.gravity:0;this.moveX=typeof e.moveX!="undefined"?e.moveX:!0;this.moveY=typeof e.moveY!="undefined"?e.moveY:!0;this.onlyTarget=typeof e.onlyTarget!="undefined"?e.onlyTarget:!0;this.doZoom=typeof e.doZoom!="undefined"?e.doZoom:!0;this.start()};dragThrow.prototype.start=function(){if(this.eventObject.addEventListener){this.eventObject.addEventListener("mousedown",this.handleOverTarget.bind(this),!1);this.eventObject.addEventListener("mousemove",this.moveIt.bind(this),!1);document.addEventListener("mouseup",this.throwIt.bind(this),!1);this.eventObject.addEventListener("touchstart",this.handleOverTarget.bind(this),!1);this.eventObject.addEventListener("touchend",this.throwIt.bind(this),!1);this.eventObject.addEventListener("touchmove",this.moveIt.bind(this),!1);this.targetObject.addEventListener("mousedown",this.handleOverTarget.bind(this),!1);this.targetObject.addEventListener("touchstart",this.handleOverTarget.bind(this),!1);this.eventObject.addEventListener("DOMMouseScroll",this.mouseZoom.bind(this),!1);this.eventObject.addEventListener("mousewheel",this.mouseZoom.bind(this),!1)}else if(this.eventObject.attachEvent){this.eventObject.attachEvent("onmousewheel",this.mouseZoom);this.eventObject.attachEvent("mousedown",this.handleOverTarget.bind(this));this.eventObject.attachEvent("onmousemove",this.moveIt.bind(this));document.attachEvent("onmouseup",this.throwIt.bind(this));this.eventObject.attachEvent("ontouchstart",this.handleOverTarget.bind(this));this.eventObject.attachEvent("ontouchend",this.throwIt.bind(this));this.eventObject.attachEvent("ontouchmove",this.moveIt.bind(this));this.targetObject.attachEvent("onmousedown",this.handleOverTarget.bind(this));this.targetObject.attachEvent("ontouchstart",this.handleOverTarget.bind(this))}};dragThrow.prototype.percentageZoom=function(e){};dragThrow.prototype.stop=function(){this.eventObject.removeEventListener("mousedown",this.handleOverTarget,!1);this.eventObject.removeEventListener("mousemove",this.moveIt.false);document.removeEventListener("mouseup",this.throwIt);this.eventObject.removeEventListener("touchstart",this.handleOverTarget,!1);this.eventObject.removeEventListener("touchend",this.throwIt,!1);this.eventObject.removeEventListener("touchmove",this.moveIt,!1);this.targetObject.removeEventListener("mousedown",this.handleOverTarget,!1);this.targetObject.removeEventListener("touchstart",this.handleOverTarget,!1)};